# Vite + TailwindCSS v4 Setup Guide

This Skeleton Theme is now enhanced with **Vite** and **TailwindCSS v4** for modern, fast development with Hot Module Replacement (HMR).

## ğŸš€ Quick Start

### 1. Install Dependencies

```bash
npm install
```

### 2. Development Mode

Run both Vite dev server and Shopify CLI simultaneously:

```bash
npm run dev
```

This will start:
- **Vite dev server** on `http://localhost:5173` (with HMR for CSS/JS)
- **Shopify CLI** theme preview (with hot-reload for Liquid)

### Alternative: Run Separately

If you prefer to run servers in separate terminals:

```bash
# Terminal 1 - Vite dev server
npm run vite:dev

# Terminal 2 - Shopify theme preview
npm run shopify:dev
```

### 3. Build for Production

Generate minified assets:

```bash
npm run build
```

This creates:
- `assets/main.min.css` - Compiled TailwindCSS
- `assets/main.min.js` - Bundled JavaScript

### 4. Push to Shopify

```bash
npm run shopify:push
```

---

## ğŸ“ Project Structure

```
skeleton-theme/
â”œâ”€â”€ src/                          # Source files (processed by Vite)
â”‚   â”œâ”€â”€ main.css                 # TailwindCSS entry point
â”‚   â””â”€â”€ main.js                  # JavaScript entry point
â”œâ”€â”€ assets/                       # Output directory for built assets
â”‚   â”œâ”€â”€ main.min.css             # Generated by Vite (gitignored)
â”‚   â”œâ”€â”€ main.min.js              # Generated by Vite (gitignored)
â”‚   â”œâ”€â”€ critical.css             # Legacy critical CSS (can be removed)
â”‚   â””â”€â”€ *.svg                    # Static assets
â”œâ”€â”€ sections/                     # Shopify sections (Liquid)
â”œâ”€â”€ snippets/                     # Shopify snippets (Liquid)
â”‚   â””â”€â”€ vite.liquid              # Vite asset loader
â”œâ”€â”€ layout/                       # Theme layouts
â”‚   â””â”€â”€ theme.liquid             # Updated to include Vite assets
â”œâ”€â”€ vite.config.ts               # Vite configuration
â”œâ”€â”€ tailwind.config.ts           # TailwindCSS v4 configuration
â”œâ”€â”€ postcss.config.cjs           # PostCSS configuration
â””â”€â”€ package.json                 # Dependencies and scripts
```

---

## ğŸ¨ Using TailwindCSS

### In Liquid Templates

Use TailwindCSS utility classes directly in your `.liquid` files:

```liquid
<div class="container mx-auto px-4">
  <h1 class="text-4xl font-bold text-gray-900">
    {{ product.title }}
  </h1>
  <p class="mt-4 text-gray-600">
    {{ product.description }}
  </p>
</div>
```

### In src/main.css

Add custom styles using Tailwind's `@layer` directive:

```css
@layer components {
  .btn-primary {
    @apply px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700;
  }
}
```

### Customizing Theme

Edit `tailwind.config.ts` to customize colors, spacing, fonts, etc.:

```ts
export default {
  theme: {
    extend: {
      colors: {
        primary: '#1a73e8',
      },
    },
  },
} satisfies Config;
```

---

## âš¡ Hot Module Replacement (HMR)

### What Gets HMR?

- âœ… **CSS changes** (`src/main.css`) - Instant updates without page reload
- âœ… **JavaScript changes** (`src/main.js`) - Fast updates with state preservation
- âœ… **TailwindCSS classes** in Liquid - Instant CSS updates

### What Requires Page Reload?

- âš ï¸ **Liquid template changes** (`.liquid` files) - Uses Shopify CLI hot-reload (~2-4s)
- âš ï¸ **Schema changes** in sections/blocks
- âš ï¸ **Config changes** (`settings_schema.json`)

### Development Workflow

```
Edit CSS/JS in src/     â†’  Vite HMR (~200-500ms)  â†’  Browser updates instantly
Edit Liquid templates   â†’  Shopify CLI (~2-4s)    â†’  Page reloads
```

---

## ğŸ”§ Configuration

### Vite Configuration

`vite.config.ts` - Controls bundling, output, and dev server:

```ts
export default defineConfig({
  plugins: [shopify(), tailwindcss()],
  build: {
    outDir: 'assets',
    manifest: true,
  },
});
```

### TailwindCSS Configuration

`tailwind.config.ts` - Customize design tokens:

```ts
export default {
  content: [
    './layout/**/*.liquid',
    './sections/**/*.liquid',
    './snippets/**/*.liquid',
    './templates/**/*.liquid',
    './blocks/**/*.liquid',
    './src/**/*.{js,ts}',
  ],
  // ... your customizations
} satisfies Config;
```

### Avoiding Class Name Conflicts

If you want to keep existing CSS and avoid conflicts, add a prefix:

```ts
// tailwind.config.ts
export default {
  prefix: 'tw-',
  // ...
} satisfies Config;
```

Then use classes like `tw-flex`, `tw-bg-blue-500`, etc.

---

## ğŸ“¦ Available Scripts

| Command | Description |
|---------|-------------|
| `npm run dev` | Run both Vite and Shopify CLI simultaneously |
| `npm run vite:dev` | Run only Vite dev server |
| `npm run shopify:dev` | Run only Shopify theme preview |
| `npm run build` | Build production assets |
| `npm run preview` | Preview production build locally |
| `npm run shopify:push` | Push theme to Shopify |
| `npm run shopify:pull` | Pull theme from Shopify |

---

## ğŸš¨ Important Notes

### Before Pushing to Shopify

Always build assets before pushing:

```bash
npm run build
npm run shopify:push
```

### Git Workflow

Generated files are gitignored:
- `assets/main.min.css`
- `assets/main.min.js`

**For CI/CD**, add a build step:

```yaml
# .github/workflows/deploy.yml
- name: Install dependencies
  run: npm install

- name: Build assets
  run: npm run build

- name: Push to Shopify
  run: shopify theme push
```

### Removing Critical.css

Since `src/main.css` includes all base styles from `critical.css`, you can:

1. Delete `assets/critical.css`
2. Remove inline styles from sections if using Tailwind
3. Simplify your theme

---

## ğŸ› Troubleshooting

### Vite dev server not connecting

1. Ensure port 5173 is not in use
2. Check firewall settings
3. Restart dev servers

### CSS not updating

1. Make sure `npm run build` was run
2. Clear browser cache
3. Check that `vite.liquid` snippet is included in `theme.liquid`

### TailwindCSS classes not working

1. Verify file paths in `tailwind.config.ts` `content` array
2. Run `npm run build` to regenerate CSS
3. Check for typos in class names

### "Module not found" errors

```bash
rm -rf node_modules package-lock.json
npm install
```

---

## ğŸ“š Resources

- [Vite Documentation](https://vitejs.dev/)
- [TailwindCSS v4 Documentation](https://tailwindcss.com/)
- [Shopify Vite Plugin](https://github.com/Shopify/vite-plugin-shopify)
- [Shopify Theme Development](https://shopify.dev/docs/themes)

---

## ğŸ¯ Next Steps

1. **Start developing**: Use TailwindCSS classes in your Liquid templates
2. **Customize theme**: Edit `tailwind.config.ts` to match your brand
3. **Add components**: Create reusable components in `src/`
4. **TypeScript support**: Rename `.js` files to `.ts` for type safety
5. **Optimize performance**: Use Vite's code splitting and lazy loading

Happy coding! ğŸš€
