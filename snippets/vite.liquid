{% comment %}
  Vite development/production asset loader

  In development: Loads Vite dev server scripts with HMR
  In production: Loads built and minified assets from /assets

  Usage: {% render 'vite' %}
{% endcomment %}

{% liquid
  # Vite dev server configuration
  assign vite_dev_server = 'http://localhost:5173'
  assign vite_client = vite_dev_server | append: '/@vite/client'
  assign vite_entry = vite_dev_server | append: '/src/main.js'

  # Check if we're in development mode (Vite dev server is running)
  # You can customize this check based on your setup
  # For now, we'll assume production mode and load built assets
  assign is_production = true
%}

{% if is_production %}
  {% comment %}
    Production mode: Load built assets from /assets folder
    These files are generated by 'npm run build'
  {% endcomment %}
  {{ 'main.min.css' | asset_url | stylesheet_tag }}
  <script src="{{ 'main.min.js' | asset_url }}" type="module"></script>
{% else %}
  {% comment %}
    Development mode: Load from Vite dev server for HMR
    Make sure Vite dev server is running on port 5173
  {% endcomment %}
  <script type="module" src="{{ vite_client }}"></script>
  <script type="module" src="{{ vite_entry }}"></script>
{% endif %}
